<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>HFMonitor: include/FFTProcessor/Result.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>include/FFTProcessor/Result.hpp</h1><a href="Result_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// -*- mode: C++; c-basic-offset: 2; indent-tabs-mode: nil  -*-</span>
<a name="l00002"></a>00002 <span class="comment">// $Id: Result.hpp 408 2014-05-18 10:18:57Z cmayer $</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">// Copyright 2010-2014 Christoph Mayer</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">// This program is free software: you can redistribute it and/or modify</span>
<a name="l00007"></a>00007 <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l00008"></a>00008 <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00009"></a>00009 <span class="comment">// (at your option) any later version.</span>
<a name="l00010"></a>00010 <span class="comment">//</span>
<a name="l00011"></a>00011 <span class="comment">// This program is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00014"></a>00014 <span class="comment">// GNU General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l00017"></a>00017 <span class="comment">// along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00018"></a>00018 <span class="comment">//</span>
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef _FFT_RESULT_HPP_cm101026_</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define _FFT_RESULT_HPP_cm101026_</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;fstream&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;deque&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;boost/lexical_cast.hpp&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;boost/date_time/posix_time/posix_time.hpp&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;boost/filesystem.hpp&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;boost/filesystem/fstream.hpp&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;boost/weak_ptr.hpp&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="protocol_8hpp.html">network/protocol.hpp</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="gen__filename_8hpp.html">gen_filename.hpp</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include "<a class="code" href="result_8hpp.html">processor/result.hpp</a>"</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include "<a class="code" href="station__info_8hpp.html">station_info.hpp</a>"</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="keyword">namespace </span>Result {
<a name="l00038"></a><a class="code" href="classResult_1_1Base.html">00038</a>   <span class="keyword">class </span><a class="code" href="classResult_1_1Base.html">Base</a> : <span class="keyword">public</span> <a class="code" href="classgen__filename.html">gen_filename</a>, <span class="keyword">public</span> processor::result_base {
<a name="l00039"></a>00039   <span class="keyword">public</span>:
<a name="l00040"></a><a class="code" href="classResult_1_1Base.html#b65b05c8a08649a3d38fc97aecf9b248">00040</a>     <span class="keyword">typedef</span> boost::shared_ptr&lt;Base&gt; <a class="code" href="classResult_1_1Base.html#b65b05c8a08649a3d38fc97aecf9b248">sptr</a>;
<a name="l00041"></a><a class="code" href="classResult_1_1Base.html#8cdaf2378ff688de5843d3b6288cc289">00041</a>     <span class="keyword">typedef</span> boost::shared_ptr&lt;Base&gt; <a class="code" href="classResult_1_1Base.html#8cdaf2378ff688de5843d3b6288cc289">Handle</a>;
<a name="l00042"></a><a class="code" href="classResult_1_1Base.html#6ec654a288685a391223cc014ac9571d">00042</a>     <span class="keyword">typedef</span> boost::weak_ptr&lt;Base&gt; <a class="code" href="classResult_1_1Base.html#6ec654a288685a391223cc014ac9571d">WeakHandle</a>;
<a name="l00043"></a><a class="code" href="classResult_1_1Base.html#ae7499e4443646acf22f0dc42aef7e5b">00043</a>     <span class="keyword">typedef</span> std::deque&lt;Handle&gt; <a class="code" href="classResult_1_1Base.html#ae7499e4443646acf22f0dc42aef7e5b">HandleVector</a>;
<a name="l00044"></a>00044 
<a name="l00045"></a><a class="code" href="classResult_1_1Base.html#b864a23aad66ef94b30aadd7d4d3e2aa">00045</a>     <a class="code" href="classResult_1_1Base.html#b864a23aad66ef94b30aadd7d4d3e2aa">Base</a>(std::string <a class="code" href="classprocessor_1_1result__base.html#bf0f813592db74dba1a4827ccc5a3bba">name</a>, <a class="code" href="classprocessor_1_1result__base.html#bbd66efa49b4e43d566ec1b658129bd5">ptime</a> <a class="code" href="classResult_1_1Base.html#61b012dd08d78702fca621f7c8b89102">time</a>)
<a name="l00046"></a>00046       : processor::<a class="code" href="classprocessor_1_1result__base.html#67e5190ab9df7ca6ae6c4e25790fd884">result_base</a>(name, time)
<a name="l00047"></a>00047       , posEndTime_(0) {}
<a name="l00048"></a><a class="code" href="classResult_1_1Base.html#4eda73762229741c4174936bfc0e9131">00048</a>     <span class="keyword">virtual</span> <a class="code" href="classResult_1_1Base.html#4eda73762229741c4174936bfc0e9131">~Base</a>() {}
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="classResult_1_1Base.html#34941e1ffccdec111e8ec56c1d7415d6">00050</a>     <span class="keyword">virtual</span> std::string <a class="code" href="classResult_1_1Base.html#34941e1ffccdec111e8ec56c1d7415d6">toString</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classprocessor_1_1result__base.html#bf0f813592db74dba1a4827ccc5a3bba">name</a>(); }
<a name="l00051"></a>00051 
<a name="l00052"></a><a class="code" href="classResult_1_1Base.html#61b012dd08d78702fca621f7c8b89102">00052</a>     <a class="code" href="classprocessor_1_1result__base.html#bbd66efa49b4e43d566ec1b658129bd5">ptime</a> <a class="code" href="classResult_1_1Base.html#61b012dd08d78702fca621f7c8b89102">time</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classprocessor_1_1result__base.html#9db4a357064bec84a7ff2a4271a5c0b7">approx_ptime</a>(); }
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="classResult_1_1Base.html#6e0b99ca205debb70943ecedf98df931">00054</a>     <span class="keywordtype">void</span> <a class="code" href="classResult_1_1Base.html#6e0b99ca205debb70943ecedf98df931">push_back</a>(<span class="keyword">const</span> <a class="code" href="classResult_1_1Base.html#8cdaf2378ff688de5843d3b6288cc289">Handle</a>&amp; h) { handles_.push_back(h); }
<a name="l00055"></a>00055 
<a name="l00056"></a><a class="code" href="classResult_1_1Base.html#73a0745d2e6fd4d0a7e64d7ffc14844e">00056</a>     <span class="keyword">const</span> <a class="code" href="classResult_1_1Base.html">Base</a>* <a class="code" href="classResult_1_1Base.html#73a0745d2e6fd4d0a7e64d7ffc14844e">getLatest</a>()<span class="keyword"> const </span>{ 
<a name="l00057"></a>00057       <span class="keywordflow">return</span> handles_.empty() ? <span class="keyword">this</span> : handles_.back().get();
<a name="l00058"></a>00058     }
<a name="l00059"></a>00059 
<a name="l00060"></a><a class="code" href="classResult_1_1Base.html#e9cffafc53521264713dc9db02ba5748">00060</a>     <span class="keywordtype">void</span> <a class="code" href="classResult_1_1Base.html#e9cffafc53521264713dc9db02ba5748">clear</a>() {
<a name="l00061"></a>00061       handles_.clear();
<a name="l00062"></a>00062     }
<a name="l00063"></a>00063 
<a name="l00064"></a>00064     <span class="comment">// dump data</span>
<a name="l00065"></a><a class="code" href="classResult_1_1Base.html#c5849e695dee2c5974e7af49c84d1ff4">00065</a>     <span class="keywordtype">void</span> <a class="code" href="classResult_1_1Base.html#c5849e695dee2c5974e7af49c84d1ff4">dumpToFile</a>(std::string path,
<a name="l00066"></a>00066                     std::string tag,
<a name="l00067"></a>00067                     std::string s)<span class="keyword"> const </span>{
<a name="l00068"></a>00068       <span class="keyword">const</span> <a class="code" href="classstation__info.html">station_info</a> si(s, <a class="code" href="classResult_1_1Base.html#ef732608aa6e22feac9719579a37daa7">lineBreak</a>());
<a name="l00069"></a>00069       boost::filesystem::fstream *ofs(0);
<a name="l00070"></a>00070       ofs = <a class="code" href="classResult_1_1Base.html#5cc3d31e2b3f7dd3fa977cb9eba9db3e">dumpSingle</a>(ofs, path, tag, <span class="keyword">this</span>, si);
<a name="l00071"></a>00071       BOOST_FOREACH(<span class="keyword">const</span> HandleVector::value_type&amp; h, handles_)
<a name="l00072"></a>00072         ofs = <a class="code" href="classResult_1_1Base.html#5cc3d31e2b3f7dd3fa977cb9eba9db3e">dumpSingle</a>(ofs, path, tag, h.get(), si);
<a name="l00073"></a>00073       <a class="code" href="classResult_1_1Base.html#0c9df439281e43328dd4ace11f4954df">updateTimeTag</a>(*ofs, posEndTime_, <a class="code" href="classResult_1_1Base.html#73a0745d2e6fd4d0a7e64d7ffc14844e">getLatest</a>()-&gt;makeTimeLabel());
<a name="l00074"></a>00074       <span class="keyword">delete</span> ofs;
<a name="l00075"></a>00075     }
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     <span class="keyword">template</span>&lt;<span class="keyword">typename</span> BROADCASTER&gt;
<a name="l00078"></a><a class="code" href="classResult_1_1Base.html#8a2bc94fe0761b96cbef8c32364adc4b">00078</a>     <span class="keywordtype">void</span> <a class="code" href="classResult_1_1Base.html#8a2bc94fe0761b96cbef8c32364adc4b">dumpToBC</a>(std::string path,
<a name="l00079"></a>00079                   std::string tag,
<a name="l00080"></a>00080                   boost::shared_ptr&lt;BROADCASTER&gt; bc,
<a name="l00081"></a>00081                   std::string s) {
<a name="l00082"></a>00082       <span class="keyword">const</span> <a class="code" href="classstation__info.html">station_info</a> si(s, <a class="code" href="classResult_1_1Base.html#ef732608aa6e22feac9719579a37daa7">lineBreak</a>());
<a name="l00083"></a>00083       <a class="code" href="classResult_1_1Base.html#2342e4dfe54daf9587805b1495a97da3">dumpToBCSingle</a>(path, tag, bc, <span class="keyword">this</span>, si);
<a name="l00084"></a>00084       BOOST_FOREACH(<span class="keyword">const</span> HandleVector::value_type&amp; h, handles_)
<a name="l00085"></a>00085         <a class="code" href="classResult_1_1Base.html#2342e4dfe54daf9587805b1495a97da3">dumpToBCSingle</a>(path, tag, bc, h.get(), si);
<a name="l00086"></a>00086 <span class="comment">//       for (HandleVector::const_iterator i(handles_.begin()), iend(handles_.end()); i!=iend; ++i)</span>
<a name="l00087"></a>00087 <span class="comment">//         dumpToBCSingle(path, tag, bc, i-&gt;get(), si);</span>
<a name="l00088"></a>00088     }
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     <span class="keyword">template</span>&lt;<span class="keyword">typename</span> BROADCASTER&gt;
<a name="l00091"></a><a class="code" href="classResult_1_1Base.html#2342e4dfe54daf9587805b1495a97da3">00091</a>     <span class="keywordtype">void</span> <a class="code" href="classResult_1_1Base.html#2342e4dfe54daf9587805b1495a97da3">dumpToBCSingle</a>(std::string path,
<a name="l00092"></a>00092                         std::string tag,
<a name="l00093"></a>00093                         boost::shared_ptr&lt;BROADCASTER&gt; bc,
<a name="l00094"></a>00094                         <a class="code" href="classResult_1_1Base.html">Base</a>* h,
<a name="l00095"></a>00095                         <span class="keyword">const</span> <a class="code" href="classstation__info.html">station_info</a>&amp; si) {
<a name="l00096"></a>00096       std::ostringstream sHeader;
<a name="l00097"></a>00097       sHeader &lt;&lt; si;
<a name="l00098"></a>00098       h-&gt;<a class="code" href="classResult_1_1Base.html#d9c4a5bc15e0e82b375056bf73c6f5f6">dump_header</a>(sHeader);
<a name="l00099"></a>00099       <span class="keyword">const</span> std::string sh(sHeader.str());
<a name="l00100"></a>00100 
<a name="l00101"></a>00101       std::ostringstream sData;
<a name="l00102"></a>00102       h-&gt;<a class="code" href="classResult_1_1Base.html#4aa0017615081c23ae585e59ee8f31be">dump_data</a>(sData);
<a name="l00103"></a>00103       <span class="keyword">const</span> std::string sd(sData.str());
<a name="l00104"></a>00104 
<a name="l00105"></a>00105       bc-&gt;bc_data(h-&gt;<a class="code" href="classResult_1_1Base.html#61b012dd08d78702fca621f7c8b89102">time</a>(), tag, h-&gt;<a class="code" href="classResult_1_1Base.html#1d3a65a2d3161dce0e638d67ac7c6a33">format</a>(), sd, sh);
<a name="l00106"></a>00106     }
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="classResult_1_1Base.html#5cc3d31e2b3f7dd3fa977cb9eba9db3e">00108</a>     boost::filesystem::fstream* <a class="code" href="classResult_1_1Base.html#5cc3d31e2b3f7dd3fa977cb9eba9db3e">dumpSingle</a>(boost::filesystem::fstream* ofs, 
<a name="l00109"></a>00109                                            std::string path, std::string tag, 
<a name="l00110"></a>00110                                            <span class="keyword">const</span> <a class="code" href="classResult_1_1Base.html">Base</a>* h,
<a name="l00111"></a>00111                                            <span class="keyword">const</span> <a class="code" href="classstation__info.html">station_info</a>&amp; si)<span class="keyword"> const </span>{
<a name="l00112"></a>00112       <span class="keyword">const</span> boost::filesystem::path p(<a class="code" href="classgen__filename.html#fa9917fe80efbce5c5c7b9e27353938e">gen_file_path</a>(path, tag, h-&gt;<a class="code" href="classResult_1_1Base.html#61b012dd08d78702fca621f7c8b89102">time</a>()));
<a name="l00113"></a>00113       <span class="keyword">const</span> <span class="keywordtype">bool</span> file_exists(boost::filesystem::exists(p));
<a name="l00114"></a>00114       <span class="keywordflow">if</span> (not file_exists) {
<a name="l00115"></a>00115         <span class="keywordflow">if</span> (ofs != NULL) { 
<a name="l00116"></a>00116           <span class="keyword">delete</span> ofs; ofs= NULL; 
<a name="l00117"></a>00117         }
<a name="l00118"></a>00118         boost::filesystem::fstream lofs(p, std::ios::out);  
<a name="l00119"></a>00119         lofs &lt;&lt; si;
<a name="l00120"></a>00120         h-&gt;<a class="code" href="classResult_1_1Base.html#af8772e5a8eaad28e8f5bcde6fdb5e01">dumpHeaderToFile</a>(lofs) &lt;&lt; h-&gt;<a class="code" href="classResult_1_1Base.html#ef732608aa6e22feac9719579a37daa7">lineBreak</a>();
<a name="l00121"></a>00121       }
<a name="l00122"></a>00122       <span class="keywordflow">if</span> (ofs == NULL) {
<a name="l00123"></a>00123         findPositionOfEndTime(p);
<a name="l00124"></a>00124         ofs = <span class="keyword">new</span> boost::filesystem::fstream(p, std::ios::in | std::ios::out);
<a name="l00125"></a>00125         ofs-&gt;seekp(0, std::ios::end);
<a name="l00126"></a>00126       }
<a name="l00127"></a>00127       h-&gt;<a class="code" href="classResult_1_1Base.html#c09e7000cf2066d0b22ef37dfe4cfe4d">dumpDataToFile</a>(*ofs) &lt;&lt; h-&gt;<a class="code" href="classResult_1_1Base.html#ef732608aa6e22feac9719579a37daa7">lineBreak</a>();
<a name="l00128"></a>00128       <span class="keywordflow">return</span> ofs;
<a name="l00129"></a>00129     }
<a name="l00130"></a>00130   <span class="keyword">protected</span>:
<a name="l00131"></a><a class="code" href="classResult_1_1Base.html#ef732608aa6e22feac9719579a37daa7">00131</a>     <span class="keyword">virtual</span> std::string <a class="code" href="classResult_1_1Base.html#ef732608aa6e22feac9719579a37daa7">lineBreak</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">"\n"</span>; }
<a name="l00132"></a>00132 
<a name="l00133"></a>00133     <span class="comment">// virtual string context dump header and data</span>
<a name="l00134"></a><a class="code" href="classResult_1_1Base.html#d9c4a5bc15e0e82b375056bf73c6f5f6">00134</a>     <span class="keyword">virtual</span> std::ostream&amp; <a class="code" href="classResult_1_1Base.html#d9c4a5bc15e0e82b375056bf73c6f5f6">dump_header</a>(std::ostream&amp; os)<span class="keyword"> const </span>{
<a name="l00135"></a>00135       <span class="keywordflow">return</span> os &lt;&lt; <span class="stringliteral">"# Time_UTC "</span>;
<a name="l00136"></a>00136     }
<a name="l00137"></a><a class="code" href="classResult_1_1Base.html#4aa0017615081c23ae585e59ee8f31be">00137</a>     <span class="keyword">virtual</span> std::ostream&amp; <a class="code" href="classResult_1_1Base.html#4aa0017615081c23ae585e59ee8f31be">dump_data</a>(std::ostream&amp; os)<span class="keyword"> const </span>{
<a name="l00138"></a>00138       <span class="keywordflow">return</span> os;
<a name="l00139"></a>00139     }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <span class="comment">// file context dump:</span>
<a name="l00142"></a><a class="code" href="classResult_1_1Base.html#af8772e5a8eaad28e8f5bcde6fdb5e01">00142</a>     <span class="keyword">virtual</span> boost::filesystem::fstream&amp; <a class="code" href="classResult_1_1Base.html#af8772e5a8eaad28e8f5bcde6fdb5e01">dumpHeaderToFile</a>(boost::filesystem::fstream&amp; os)<span class="keyword"> const </span>{
<a name="l00143"></a>00143       std::string timeLabel(makeTimeLabel());
<a name="l00144"></a>00144       os &lt;&lt; <span class="stringliteral">"# StartTime = "</span> &lt;&lt; timeLabel &lt;&lt; <span class="stringliteral">" [UTC]"</span> &lt;&lt; <a class="code" href="classResult_1_1Base.html#ef732608aa6e22feac9719579a37daa7">lineBreak</a>();
<a name="l00145"></a>00145       posEndTime_   = os.tellg() + std::streamoff(14);          
<a name="l00146"></a>00146       os &lt;&lt; <span class="stringliteral">"# EndTime   = "</span> &lt;&lt; timeLabel &lt;&lt; <span class="stringliteral">" [UTC]"</span> &lt;&lt; <a class="code" href="classResult_1_1Base.html#ef732608aa6e22feac9719579a37daa7">lineBreak</a>();
<a name="l00147"></a>00147       std::ostringstream oss; <a class="code" href="classResult_1_1Base.html#d9c4a5bc15e0e82b375056bf73c6f5f6">dump_header</a>(oss);
<a name="l00148"></a>00148       os &lt;&lt; oss.str();
<a name="l00149"></a>00149       <span class="keywordflow">return</span> os;
<a name="l00150"></a>00150     }
<a name="l00151"></a><a class="code" href="classResult_1_1Base.html#c09e7000cf2066d0b22ef37dfe4cfe4d">00151</a>     <span class="keyword">virtual</span> boost::filesystem::fstream&amp; <a class="code" href="classResult_1_1Base.html#c09e7000cf2066d0b22ef37dfe4cfe4d">dumpDataToFile</a>(boost::filesystem::fstream&amp; os)<span class="keyword"> const </span>{
<a name="l00152"></a>00152       os &lt;&lt; makeTimeLabel() &lt;&lt; <span class="stringliteral">" "</span>;
<a name="l00153"></a>00153       std::ostringstream oss; <a class="code" href="classResult_1_1Base.html#4aa0017615081c23ae585e59ee8f31be">dump_data</a>(oss);
<a name="l00154"></a>00154       os &lt;&lt; oss.str();
<a name="l00155"></a>00155       <span class="keywordflow">return</span> os;
<a name="l00156"></a>00156     }
<a name="l00157"></a>00157 
<a name="l00158"></a><a class="code" href="classResult_1_1Base.html#0c9df439281e43328dd4ace11f4954df">00158</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classResult_1_1Base.html#0c9df439281e43328dd4ace11f4954df">updateTimeTag</a>(boost::filesystem::fstream&amp; os,
<a name="l00159"></a>00159                                std::ostream::streampos pos,
<a name="l00160"></a>00160                                std::string timeTag)<span class="keyword"> const </span>{
<a name="l00161"></a>00161       os.seekp(pos, std::ios::beg);
<a name="l00162"></a>00162       os &lt;&lt; timeTag;
<a name="l00163"></a>00163       os.seekp(0,   std::ios::end);
<a name="l00164"></a>00164     }
<a name="l00165"></a>00165 
<a name="l00166"></a><a class="code" href="classResult_1_1Base.html#1d3a65a2d3161dce0e638d67ac7c6a33">00166</a>     <span class="keyword">virtual</span> std::string <a class="code" href="classResult_1_1Base.html#1d3a65a2d3161dce0e638d67ac7c6a33">format</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">"TXT_0000"</span>; }
<a name="l00167"></a>00167 
<a name="l00168"></a>00168   <span class="keyword">protected</span>:
<a name="l00169"></a>00169 <span class="comment">//     std::string name_;</span>
<a name="l00170"></a>00170 <span class="comment">//     ptime time_;</span>
<a name="l00171"></a>00171   <span class="keyword">private</span>:
<a name="l00172"></a>00172     std::string makeTimeLabel()<span class="keyword"> const </span>{
<a name="l00173"></a>00173       std::stringstream oss;
<a name="l00174"></a>00174       oss.imbue(std::locale(oss.getloc(), <span class="keyword">new</span> boost::posix_time::time_facet(<span class="stringliteral">"%Y-%m-%d %H:%M:%S.%f"</span>)));
<a name="l00175"></a>00175       oss &lt;&lt; <a class="code" href="classResult_1_1Base.html#61b012dd08d78702fca621f7c8b89102">time</a>();
<a name="l00176"></a>00176       <span class="keywordflow">return</span> oss.str();
<a name="l00177"></a>00177     }
<a name="l00178"></a>00178     <span class="keywordtype">void</span> findPositionOfEndTime(<span class="keyword">const</span> boost::filesystem::path&amp; p)<span class="keyword"> const </span>{
<a name="l00179"></a>00179       boost::filesystem::ifstream ifs(p);
<a name="l00180"></a>00180       std::string line;
<a name="l00181"></a>00181       std::ostream::streampos pos(0);
<a name="l00182"></a>00182       <span class="keywordflow">while</span> (std::getline(ifs, line)) {
<a name="l00183"></a>00183         <span class="keywordflow">if</span> (line[0] != <span class="charliteral">'#'</span>) <span class="keywordflow">break</span>;
<a name="l00184"></a>00184         <span class="keywordflow">if</span> (std::string(line, 2, 9) == <span class="stringliteral">"EndTime  "</span>)
<a name="l00185"></a>00185           posEndTime_   = pos + std::streamoff(14);
<a name="l00186"></a>00186         pos += line.size() + 1;
<a name="l00187"></a>00187       }
<a name="l00188"></a>00188     }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     <span class="keyword">mutable</span> std::ostream::streampos posEndTime_;
<a name="l00191"></a>00191     <span class="comment">// collected results</span>
<a name="l00192"></a>00192     <span class="keyword">mutable</span> <a class="code" href="classResult_1_1Base.html#ae7499e4443646acf22f0dc42aef7e5b">HandleVector</a> handles_;
<a name="l00193"></a>00193   } ;
<a name="l00194"></a>00194 } <span class="comment">// namespace Result</span>
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="preprocessor">#endif // _FFT_RESULT_HPP_cm101026_</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on 4 Jul 2014 for HFMonitor by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
